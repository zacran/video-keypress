(this["webpackJsonpvideo-keypress"]=this["webpackJsonpvideo-keypress"]||[]).push([[0],{130:function(e,t,a){},132:function(e){e.exports=JSON.parse('{"homepage":"http://zacran.github.io/video-keypress","name":"video-keypress","version":"1.0.7","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.32","@fortawesome/free-solid-svg-icons":"^5.15.1","@fortawesome/react-fontawesome":"^0.1.13","@material-ui/core":"^4.11.2","@material-ui/data-grid":"^4.0.0-alpha.19","@material-ui/icons":"^4.11.2","@material-ui/lab":"^4.0.0-alpha.57","@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.3.0","@use-it/event-listener":"^0.1.6","fontsource-roboto":"^4.0.0","react":"^17.0.1","react-color":"^2.19.3","react-dom":"^17.0.1","react-gantt-timeline":"^0.4.3","react-google-charts":"^3.0.15","react-player":"^2.7.0","react-scripts":"4.0.1","reactn":"^2.2.7","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.1.0"}}')},216:function(e,t,a){"use strict";a.r(t);var i=a(2),n=a(51),r=a.n(n),c=a(14),o=a.n(c),s={Keybinds:[{id:1,key:"1",order:1,behavior:"Behavior1",active:!1},{id:2,key:"2",order:2,behavior:"Behavior2",active:!1},{id:3,key:"3",order:3,behavior:"Behavior3",active:!1}]},l=a(43),d=a(8),b=a(9),j=a(288),u=a(285),h=a(287),v=a(286),p=a(281),m=a(289),O=a(283),x=a(45),f=a(220),g=a(221),y=a(282),k=a(134),N=a(228),w=a(32),S=a(5),F=a(275),C=a(155),E=a(278),z=a(112),B=a(75),R=a(142),A=a.n(R),D=a(106),I=a.n(D),P=a(140),T=a.n(P),V=a(108),M=a.n(V),U=a(91),G=a.n(U),J=a(141),K=a.n(J),L=a(144),H=a.n(L),W=a(147),_=a.n(W),q=a(145),Q=a.n(q),X=a(107),Y=a.n(X),Z=a(146),$=a.n(Z),ee=a(143),te=a.n(ee),ae=a(284),ie=a(291),ne=a(103),re=a(0),ce=a(131),oe=a.n(ce),se=a(132),le=(a(130),a(290)),de=a(280),be=a(279),je=a(292),ue=a(133),he=a(139),ve=a.n(he),pe=a(138),me=a.n(pe),Oe=a(136),xe=.01,fe="Event: ";function ge(e){return 1e3*e}function ye(e){var t=e.toFixed(2);return isNaN(t)&&(t=0),"".concat(e.toFixed(2),"ms")}var ke=Object(w.a)((function(e){return{root:{flexGrow:1,margin:"auto",maxWidth:"600px"},accordion:{margin:"auto",maxWidth:"840px",marginBottom:"20px"},details:{flexDirection:"column"},paper:{padding:e.spacing(1),fontSize:"12px",textAlign:"center",backgroundColor:e.palette.primary.main,color:e.palette.secondary.contrastText,flexBasis:"25%"},control:{padding:e.spacing(2)}}})),Ne=function(e){var t=Object(re.useState)([]),a=Object(d.a)(t,2),c=a[0],o=a[1],s=Object(re.useState)([]),l=Object(d.a)(s,2),j=l[0],u=l[1],h=Object(re.useState)(0),v=Object(d.a)(h,2),p=v[0],m=v[1],O=Object(re.useState)(0),f=Object(d.a)(O,2),g=f[0],y=f[1],k=Object(re.useState)({}),N=Object(d.a)(k,2),w=N[0],S=N[1],F=Object(re.useState)({}),C=Object(d.a)(F,2),E=(C[0],C[1]),z=Object(n.useGlobal)("state"),R=Object(d.a)(z,2),A=R[0],D=R[1],I=ke();Object(re.useEffect)((function(){var e=setInterval((function(){c.length!==g&&(y(c.length),P())}),1e3);return function(){return clearInterval(e)}}));var P=function(){var e=c.filter((function(e){return"string"===typeof e[0]&&"Meta"!==e[1]}));console.log(c);var t=[];e.forEach((function(e){-1===t.indexOf(e[0])&&t.push(e[0])}));var a=[],i=A.keybinds,n=0;t.forEach((function(t){var r,c=0,o=e.filter((function(e){return e[0]===t}));i.filter((function(e){return e.behavior===t})).order;console.log("finding derived fields for "+t+" found "+o.length+" events"),r=o.length,o.forEach((function(e){c+=e[3]-e[2]}));var s=c/r;0===r&&(s=0);var l={id:n,order:null,behavior:t,occurences:r,totalDuration:c,avgDuration:s};a.push(l),n++})),a.sort((function(e,t){if(void 0!==e.order&&void 0!==t.order)return e.order>t.order?1:-1;var a=e.behavior.toUpperCase(),i=t.behavior.toUpperCase();return a<i?-1:a>i?1:0})),u((function(e){return a})),A.derivedFields=j},T=function(e){return e.end-e.start<xe&&(e.end+=xe),A.data.events.forEach((function(t){t.id!==e.id&&t.behavior===e.behavior&&(t.start===e.start&&(console.warn("Adjusted event start time due to existing similar events: "+e.id),e.start+=.011),t.behavior===e.behavior&&t.end===e.start&&(console.warn("Adjusted event start time due to existing similar events: "+e.id),e.start+=.001),t.end===e.end&&(console.warn("Adjusted event end time due to existing similar events: "+e.id),e.end+=.011))})),[e.behavior,fe+e.id,ge(e.start),ge(e.end)]};Object(re.useEffect)((function(){var e=""!==A.dataFileName,t=0===c.length,a=A.data.events&&0===A.data.events.length;if(e||0===c.length||(o([]),u([])),e&&t){var i=[[{type:"string",id:"Behavior"},{type:"string",id:"Event"},{type:"number",id:"Start"},{type:"number",id:"End"}],["Behavior","Meta",0,ge(A.data.metadata.duration)]];if(A.isVideo&&a)A.keybinds.forEach((function(e){i.push([e.behavior,"Meta",0,0])}));else if(!a){var n=[];A.data.events.forEach((function(e){-1===n.indexOf(e.behavior)&&n.push(e.behavior)})),console.log(JSON.stringify(n)),n.sort((function(e,t){var a=e.toUpperCase(),i=t.toUpperCase();return a<i?-1:a>i?1:0})),n.forEach((function(e){i.push([e,"Meta",0,0])}))}m(i.length),o(i)}var r=A.data.events&&A.data.events.length>0,s=A.data.events.length+p>c.length;if(r&&s){console.log("Adding new event");for(var l,d,b=A.data.events.length+p-c.length,j=[];b>0;)l=A.data.events[A.data.events.length-b],d=T(l),j.push(d),b--;o((function(e){return e.concat(j)}))}}));var V=[{field:"behavior",headerName:"Behavior",width:200},{field:"occurences",headerName:"Occurences",type:"number",width:200,valueFormatter:function(e){return e.value}},{field:"avgDuration",headerName:"Avg Duration",type:"number",width:200,valueFormatter:function(e){return ye(e.value)}},{field:"totalDuration",headerName:"Total Duration",type:"number",width:200,valueFormatter:function(e){return ye(e.value)}}],M=function(e,t){"clickaway"!==t&&(S({active:!1}),E({active:!1}))};return Object(i.jsxs)("div",{className:"Row",children:[""!==e.state.dataFileName&&Object(i.jsxs)(le.a,{className:I.accordion,children:[Object(i.jsx)(be.a,{expandIcon:Object(i.jsx)(me.a,{}),"aria-controls":"derivedfields-content",children:Object(i.jsx)(B.a,{variant:"caption",children:"Derived Fields"})}),Object(i.jsx)(de.a,{className:I.accordion,children:Object(i.jsx)("div",{style:{height:j.length>0?55*j.length+3:75,width:"100%"},children:Object(i.jsx)(ue.a,{rows:j,columns:V,autoPageSize:!0,density:"compact",hideFooter:!0})})})]}),Object(i.jsx)("div",{id:"chart-container",className:"GoogleChart",children:c.length>1&&Object(i.jsx)(Oe.a,{width:"840px",height:"400px",chartType:"Timeline",data:c,options:{timeline:{colorByRowLabel:!0,margin:"auto",showBarLabels:!1},colors:["transparent","#469FAE","#3ECDB6","#C09BD8","#F67E5C","#CA1252","#DD5B5C","#D9959A","#938D99","#5E614A"]},rootProps:{"data-testid":"6"},chartEvents:[{eventName:"select",callback:function(e){var t=e.chartWrapper.getChart().getSelection()[0],a=c[t.row+1],i={behavior:a[0],id:a[1],start:a[2],end:a[3],active:!0};"Meta"!==i.id&&S(i),console.log(i)}}]})}),Object(i.jsx)("div",{children:Object(i.jsx)(je.a,{open:w.active,autoHideDuration:null,onClose:M,message:"Selected: ".concat(w.id),action:Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(x.a,{size:"small","aria-label":"delete",color:"secondary",onClick:function(){var e=c.filter((function(e){return e[1]!==w.id}));o(e);var t=parseInt(w.id.replace(fe,"")),a=A.data.events.filter((function(e){return e.id!==t}));D(Object(b.a)(Object(b.a)({},A),{},{data:{events:a,metadata:Object(b.a)({},A.data.metadata)}})),E(w),S({active:!1})},children:Object(i.jsx)(G.a,{fontSize:"small"})}),Object(i.jsx)(x.a,{size:"small","aria-label":"close",color:"inherit",onClick:M,children:Object(i.jsx)(ve.a,{fontSize:"small"})})]})})})]})},we=a(61),Se=Object(we.a)({palette:{primary:{500:"#469FAE"}}}),Fe=["32"," "],Ce=Object(w.a)((function(e){return{content:{marginTop:"55px"},reactPlayer:{margin:"auto"},slider:{margin:"0px 20px",width:"80%"},dataText:{height:"420px",width:"840px",overflow:"scroll",margin:"auto",border:"1px solid ".concat(e.palette.divider),borderRadius:e.shape.borderRadius},button:{padding:0},largeButton:{display:"inline-block",margin:"auto","& svg":{fontSize:144}},toolbar:{minHeight:48,maxHeight:48},restrictedText:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",margin:"0px 10px",maxWidth:"300px"},title:{flexGrow:1},bottomAppBar:{top:"auto",bottom:0},bottomToolbar:{margin:"auto",minWidth:"700px",textAlign:"center",minHeight:32,maxHeight:32},menu:{width:"fit-content",border:"1px solid ".concat(e.palette.divider),borderRadius:e.shape.borderRadius,"& svg":{margin:e.spacing(1.5)},"& hr":{margin:e.spacing(0,.5)}}}})),Ee=Object(S.a)({paper:{border:"1px solid #d3d4d5",width:"200px",margin:"0px 10px"}})((function(e){return Object(i.jsx)(k.a,Object(b.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"}},e))})),ze=function(){var e=!1,t=Object(re.useState)({}),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(re.useState)(null),k=Object(d.a)(o,2),w=k[0],S=k[1],R=Object(n.useGlobal)("state"),D=Object(d.a)(R,2),P=D[0],V=D[1];Object(re.useEffect)((function(){var e=JSON.parse(localStorage.getItem("keybinds"))||void 0;e&&Array.isArray(e)&&V(Object(b.a)(Object(b.a)({},P),{},{keybinds:e}))}),[]);var U=function(){return window.confirm("Are you sure you wish to reset the existing video? Unsaved data will be lost.")},J=function(){ue.current.value="",V(Object(b.a)(Object(b.a)({},P),{},{dataFileName:"",isVideo:!1,isPlaying:!1,data:{metadata:{},events:[]}}))};var L=Boolean(w),W=function(e){localStorage.setItem("keybinds",JSON.stringify(e));var t=JSON.parse(localStorage.getItem("keybinds"))||void 0;t&&Array.isArray(t)&&V(Object(b.a)(Object(b.a)({},P),{},{keybinds:t}))},q=function(e){return function(t){var a=t.target.value;if(void 0!==a){if("order"!==e||""===a||isNaN(a)||(a=parseInt(a)),"key"===e)if(P.keybinds.find((function(e){return e.key===a})))return void c(Object(b.a)(Object(b.a)({},r),{},{keyError:!0}));if("behavior"===e)if(P.keybinds.find((function(e){return e.behavior===a})))return void c(Object(b.a)(Object(b.a)({},r),{},{behaviorError:!0}));c((function(t){return t=Object(b.a)(Object(b.a)({},t),{},Object(l.a)({},e,a)),"behavior"===e&&t.behaviorError&&(t.behaviorError=!1),"key"===e&&t.keyError&&(t.keyError=!1),t}))}}},X=function(){S(null)},Z=function(e){(""===P.dataFileName||U())&&(J(),ue.current.click())},ee=function(){(""===P.dataFileName||U())&&(J(),he.current.click())},ce=function(){V(Object(b.a)(Object(b.a)({},P),{},{isPlaying:!0}))},le=function(e,t){P.keybinds.forEach((function(a){a.key===String(e)&&t(a)}))},de=function(e){if(!e.active){e.active=!0;var t={key:e.key,behavior:e.behavior,order:e.order,start:parseFloat(P.playedSeconds.toFixed(3))},a=P.activeRecords;a.push(t),V(Object(b.a)(Object(b.a)({},P),{},{activeRecords:a}))}},be=function(e){var t=P.activeRecords.find((function(t){return t.key===e.key})),a=P.activeRecords.filter((function(t){return t.key!==e.key}));if(t){var i=P.playedSeconds.toFixed(3),n=Math.max.apply(Math,P.data.events.map((function(e){return e.id})));n=isFinite(n)?n+1:0,e.active=!1,t.id=n,t.end=parseFloat(i);var r=P.data.events;r.push(t),V(Object(b.a)(Object(b.a)({},P),{},{activeRecords:a,data:{events:r,metadata:Object(b.a)({},P.data.metadata)}}))}};Object(ne.a)("keydown",(function(t){""!==P.videoFilePath&&P.isVideo&&Fe.includes(String(t.key))?(t.preventDefault(),e=!e):P.isVideo&&P.isPlaying&&le(t.key,de)})),Object(ne.a)("keyup",(function(e){var t=e.key;le(t,be)}));var je=Ce(),ue=Object(re.useRef)(null),he=Object(re.useRef)(null),ve=Object(re.useState)(null),pe=Object(d.a)(ve,2),me=pe[0],Oe=pe[1];return Object(i.jsxs)(F.a,{theme:Se,children:[Object(i.jsx)(p.a,{}),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("input",{type:"file",ref:ue,onChange:function(e){var t=e.target.files[0];if(t){var a=document.createElement("video"),i=URL.createObjectURL(t);a.src=i,a.addEventListener("loadedmetadata",(function(){var t=parseFloat(a.duration.toFixed(2));V(Object(b.a)(Object(b.a)({},P),{},{videoFilePath:i,dataFileName:e.target.files[0].name,isVideo:!0,data:{metadata:{fileName:e.target.files[0].name,scoringDate:Date.now(),scoringDateText:(new Date).toISOString(),duration:t},events:[]}})),document.activeElement.blur()}))}},style:{display:"none"}}),Object(i.jsx)("input",{type:"file",ref:he,onChange:function(e){var t=new FileReader;t.readAsText(e.target.files[0],"UTF-8");var a=e.target.files[0].name;t.onload=function(e){var t=JSON.parse(e.target.result);t.events&&Array.isArray(t.events)&&t.metadata&&t.metadata.fileName?V(Object(b.a)(Object(b.a)({},P),{},{dataFileName:a,data:t})):console.warn("Selected data not valid.")}},style:{display:"none"}}),Object(i.jsxs)(Ee,{className:je.popoverMenu,anchorEl:me,keepMounted:!0,open:Boolean(me),onClose:function(){Oe(null)},children:[Object(i.jsx)(y.a,{primary:"Settings",align:"center",disabled:!0}),Object(i.jsx)(y.a,{secondary:"Video Size",align:"center",disabled:!0}),Object(i.jsx)(O.a,{align:"center",style:{paddingBottom:"8px"},children:Object(i.jsxs)(ie.a,{size:"small",value:P.videoSize||"840px",align:"center",exclusive:!0,onChange:function(e,t){t!==P.videoSize&&V(Object(b.a)(Object(b.a)({},P),{},{videoSize:t}))},"aria-label":"video-size-togglegroup",children:[Object(i.jsx)(ae.a,{value:"600px","aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"600px"})}),Object(i.jsx)(ae.a,{value:"840px","aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"840px"})}),Object(i.jsx)(ae.a,{value:"1080px","aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"1080px"})})]})}),Object(i.jsx)(y.a,{secondary:"Playback Speed",align:"center",disabled:!0}),Object(i.jsx)(O.a,{align:"center",style:{paddingBottom:"8px"},children:Object(i.jsxs)(ie.a,{size:"small",value:P.playbackRate||1,align:"center",exclusive:!0,onChange:function(e,t){t!==P.playbackRate&&V(Object(b.a)(Object(b.a)({},P),{},{playbackRate:parseFloat(t)}))},"aria-label":"playback-rate-togglegroup",children:[Object(i.jsx)(ae.a,{value:.5,"aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"0.5x"})}),Object(i.jsx)(ae.a,{value:1,"aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"1.0x"})}),Object(i.jsx)(ae.a,{value:1.5,"aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"1.5x"})}),Object(i.jsx)(ae.a,{value:2,"aria-label":"centered",children:Object(i.jsx)(B.a,{variant:"caption",align:"center",children:"2.0x"})})]})}),Object(i.jsx)(y.a,{secondary:"Keybinds",align:"center",disabled:!0}),Object(i.jsxs)(f.a,{component:"nav","aria-label":"keybinds-list",className:je.root,style:{paddingTop:"0px"},dense:!0,children:[Object(i.jsx)(g.a,{dense:!0,children:Object(i.jsx)(y.a,{primary:"Pause/Resume",secondary:"keybind: space"})}),Object(i.jsx)(N.a,{open:L,anchorEl:w,disableRestoreFocus:!0,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"},children:Object(i.jsxs)(u.a,{className:je.root,variant:"outlined",children:[Object(i.jsxs)(v.a,{children:[Object(i.jsx)(y.a,{primary:"Edit Keybind",secondary:"Changes are saved to your browser cache"}),Object(i.jsx)(C.a,{id:"keybind-behavior-input",variant:"outlined",size:"small",error:!!r.behaviorError,helperText:r.behaviorError?"Invalid value":"",label:"Behavior Name",defaultValue:r.behavior,onChange:q("behavior")}),Object(i.jsx)(C.a,{id:"keybind-key-input",variant:"outlined",size:"small",error:!!r.keyError,helperText:r.keyError?"Invalid value":"",label:"Key",inputProps:{maxLength:1},defaultValue:r.key,onChange:q("key")})]}),Object(i.jsxs)(h.a,{children:[Object(i.jsx)(z.a,{title:"Accept",children:Object(i.jsx)(x.a,{size:"small",className:je.smallButton,color:"primary",disabled:!(!r.keyError&&!r.behaviorError),onClick:function(e){var t=P.keybinds,a=t.findIndex((function(e){return e.id===r.id}));t[a]=r,V(Object(b.a)(Object(b.a)({},P),{},{keybinds:t})),W(t),X()},children:Object(i.jsx)(T.a,{fontSize:"small"})})}),Object(i.jsx)(z.a,{title:"Cancel",children:Object(i.jsx)(x.a,{size:"small",color:"secondary",onClick:X,children:Object(i.jsx)(I.a,{fontSize:"small"})})})]})]})}),P.keybinds.map((function(e){return Object(i.jsxs)(g.a,{dense:!0,children:[Object(i.jsx)(y.a,{primary:e.behavior,secondary:"keybind: ".concat(e.key)}),Object(i.jsx)(z.a,{title:"Edit Keybind",children:Object(i.jsx)(x.a,{size:"small",color:"primary",onClick:function(t){return function(e,t){c(t),S(e.currentTarget)}(t,e)},children:Object(i.jsx)(K.a,{fontSize:"small"})})}),Object(i.jsx)(z.a,{title:"Delete Keybind",children:Object(i.jsx)(x.a,{size:"small",color:"secondary",onClick:function(t){return function(e,t){if(window.confirm("Are you sure you wish to delete this keybind?")){var a=P.keybinds.filter((function(e){return e.id!==t.id}));V(Object(b.a)(Object(b.a)({},P),{},{keybinds:a})),W(a)}}(0,e)},children:Object(i.jsx)(G.a,{fontSize:"small"})})})]},e.id)})),Object(i.jsxs)(O.a,{align:"center",children:[Object(i.jsx)(z.a,{title:"Add New Keybind",children:Object(i.jsx)(x.a,{color:"primary",size:"small",onClick:function(){var e=P.keybinds,t=Math.max.apply(Math,e.map((function(e){return e.id})));t=isFinite(t)?t+1:0;var a=Math.max.apply(Math,e.map((function(e){return e.order})));a=isFinite(a)?a+1:0,e.push({id:t,key:"0",order:a,behavior:"New Behavior",active:!1}),V(Object(b.a)(Object(b.a)({},P),{},{keybinds:e})),W(e)},children:Object(i.jsx)(A.a,{fontSize:"small"})})}),Object(i.jsx)(z.a,{title:"Reset to Defaults",children:Object(i.jsx)(x.a,{color:"primary",size:"small",onClick:function(){window.confirm("Are you sure you wish to clear local settings?")&&(localStorage.clear(),V(Object(b.a)(Object(b.a)({},P),{},{keybinds:s.Keybinds})))},children:Object(i.jsx)(te.a,{fontSize:"small"})})})]})]})]}),Object(i.jsx)(j.a,{position:"fixed",color:"primary",children:Object(i.jsxs)(E.a,{className:je.toolbar,children:[Object(i.jsx)(B.a,{variant:"h5",component:"h1",className:je.title,children:"Video Keypress"}),Object(i.jsxs)(O.a,{container:!0,alignItems:"center",className:je.menu,children:[P.dataFileName&&Object(i.jsx)(z.a,{title:P.dataFileName,children:Object(i.jsxs)(O.a,{item:!0,children:[Object(i.jsxs)(B.a,{variant:"caption",display:"block",className:je.restrictedText,children:["Current ",P.isVideo?"Video":"Data",":"]}),Object(i.jsx)(B.a,{variant:"overline",display:"block",className:je.restrictedText,children:P.dataFileName})]})}),P.dataFileName&&Object(i.jsx)(m.a,{orientation:"vertical",flexItem:!0}),P.dataFileName&&Object(i.jsx)(z.a,{title:"Download Data",children:Object(i.jsx)(x.a,{"aria-label":"download data",color:"inherit",className:je.button,onClick:function(){if(P.data.events&&P.data.events.length>0){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(P.data)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",P.dataFileName+"-scored-behavior.json"),document.body.appendChild(t),t.click(),t.remove()}},children:Object(i.jsx)(H.a,{})})}),P.dataFileName&&Object(i.jsx)(m.a,{orientation:"vertical",flexItem:!0}),P.dataFileName&&Object(i.jsx)(z.a,{title:"Download SVG",children:Object(i.jsx)(x.a,{"aria-label":"download svg",color:"inherit",className:je.button,onClick:function(){if(P.data.events&&P.data.events.length>0){var e=document.getElementById("chart-container").getElementsByTagName("svg")[0].outerHTML;e=e.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"');var t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download=P.dataFileName+"-scored-behavior.svg",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},children:Object(i.jsx)(Q.a,{})})}),P.dataFileName&&Object(i.jsx)(m.a,{orientation:"vertical",flexItem:!0}),P.dataFileName&&Object(i.jsx)(z.a,{title:"Unset Video",children:Object(i.jsx)(x.a,{"aria-label":"unset video",color:"inherit",className:je.button,onClick:function(){U()&&J()},children:Object(i.jsx)(I.a,{})})}),P.dataFileName&&Object(i.jsx)(m.a,{orientation:"vertical",flexItem:!0}),Object(i.jsx)(z.a,{title:"Select Video",children:Object(i.jsx)(x.a,{"aria-label":"select video",color:"inherit",className:je.button,onClick:function(e){return Z()},children:Object(i.jsx)(Y.a,{})})}),Object(i.jsx)(m.a,{orientation:"vertical",flexItem:!0}),Object(i.jsx)(z.a,{title:"Select Data",children:Object(i.jsx)(x.a,{"aria-label":"select data",color:"inherit",className:je.button,onClick:ee,children:Object(i.jsx)(M.a,{})})}),Object(i.jsx)(m.a,{orientation:"vertical",flexItem:!0}),Object(i.jsx)(z.a,{title:"Settings",children:Object(i.jsx)(x.a,{"aria-label":"settings",color:"inherit","aria-haspopup":"true",onClick:function(e){Oe(e.currentTarget)},className:je.button,children:Object(i.jsx)($.a,{})})})]})]})}),Object(i.jsxs)("div",{className:je.content,children:[!P.dataFileName&&Object(i.jsxs)("div",{align:"center",children:[Object(i.jsx)(B.a,{variant:"caption",display:"block",align:"center",gutterBottom:!0,children:"Please select a video or select data from a previous session!"}),Object(i.jsx)(z.a,{title:"Select Video",align:"center",children:Object(i.jsx)(x.a,{"aria-label":"select video",color:"primary",className:je.largeButton,onClick:function(e){return Z()},children:Object(i.jsx)(Y.a,{})})}),Object(i.jsx)(z.a,{title:"Select Data",align:"center",children:Object(i.jsx)(x.a,{"aria-label":"select video",color:"primary",className:je.largeButton,onClick:function(e){return ee()},children:Object(i.jsx)(M.a,{})})})]}),Object(i.jsx)("div",{className:"Row",children:Object(i.jsxs)("div",{className:"VideoPlay",children:[P.dataFileName&&!P.isVideo&&Object(i.jsx)("div",{className:je.dataText,children:Object(i.jsx)("pre",{children:JSON.stringify(P.data,void 0,2)})}),P.dataFileName&&P.isVideo&&Object(i.jsx)(oe.a,{url:P.videoFilePath,className:je.reactPlayer,playing:e,width:P.videoSize,height:"100%",autoPlay:!1,muted:!0,controls:!0,onDuration:function(e){V(Object(b.a)(Object(b.a)({},P),{},{duration:e}))},onProgress:function(e){V(Object(b.a)(Object(b.a)({},P),{},{playedSeconds:e.playedSeconds,loadedSeconds:e.loadedSeconds}))},playbackRate:P.playbackRate||1,onPause:function(){V(Object(b.a)(Object(b.a)({},P),{},{isPlaying:!1}))},onStart:ce,onPlay:ce}),Object(i.jsx)("div",{className:"Row",children:Object(i.jsx)(Ne,{state:P})})]})})]}),Object(i.jsx)(j.a,{position:"fixed",color:"primary",className:je.bottomAppBar,children:Object(i.jsx)(E.a,{className:je.bottomToolbar,children:Object(i.jsxs)(O.a,{container:!0,alignItems:"center",spacing:2,children:[Object(i.jsx)(O.a,{item:!0,xs:6,children:Object(i.jsx)(B.a,{variant:"caption",align:"center",gutterBottom:!0,children:"No data is transfered. All data remains in your browser."})}),Object(i.jsx)(O.a,{item:!0,xs:1,children:Object(i.jsx)(z.a,{title:"Visit GitHub Repo",children:Object(i.jsx)(x.a,{"aria-label":"visit github repo",color:"inherit",className:je.button,onClick:function(){window.open("https://github.com/zacran/video-keypress","_blank")},children:Object(i.jsx)(_.a,{})})})}),Object(i.jsx)(O.a,{item:!0,xs:1,children:Object(i.jsxs)(B.a,{variant:"caption",align:"center",gutterBottom:!0,children:["v",se.version]})}),Object(i.jsx)(O.a,{item:!0,xs:4,children:Object(i.jsx)(B.a,{variant:"caption",align:"center",gutterBottom:!0,children:"GNU General Public License"})})]})})})]})]})};Object(n.setGlobal)({state:{dataFileName:"",isVideo:!1,isPlaying:!1,duration:0,playedSeconds:0,loadedSeconds:0,playbackRate:1,videoSize:"840px",keybinds:s.Keybinds,data:{recordedEvents:0,metadata:{},events:[]},activeRecords:[],derivedFields:[]}}),o.a.render(Object(i.jsx)(ze,{}),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.51e34154.chunk.js.map