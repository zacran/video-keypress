(this["webpackJsonpvideo-keypress"]=this["webpackJsonpvideo-keypress"]||[]).push([[0],{131:function(e,t,a){},134:function(e){e.exports=JSON.parse('{"homepage":"http://zacran.github.io/video-keypress","name":"video-keypress","version":"1.0.11","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.32","@fortawesome/free-solid-svg-icons":"^5.15.1","@fortawesome/react-fontawesome":"^0.1.13","@material-ui/core":"^4.11.2","@material-ui/data-grid":"^4.0.0-alpha.19","@material-ui/icons":"^4.11.2","@material-ui/lab":"^4.0.0-alpha.57","@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.3.0","@use-it/event-listener":"^0.1.6","fontsource-roboto":"^4.0.0","react":"^17.0.1","react-color":"^2.19.3","react-dom":"^17.0.1","react-gantt-timeline":"^0.4.3","react-google-charts":"^3.0.15","react-player":"^2.7.0","react-scripts":"4.0.1","reactn":"^2.2.7","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.1.0"}}')},217:function(e,t,a){"use strict";a.r(t);var i=a(52),n=a.n(i),r=a(16),c=a.n(r),o={Keybinds:[{id:1,key:"1",order:1,behavior:"Behavior1",active:!1},{id:2,key:"2",order:2,behavior:"Behavior2",active:!1},{id:3,key:"3",order:3,behavior:"Behavior3",active:!1}]},s=a(14),l=a(7),d=a(10),b=a(287),j=a(284),u=a(286),v=a(285),h=a(280),p=a(288),m=a(282),O=a(59),x=a(223),f=a(224),g=a(281),y=a(139),k=a(231),N=a(132),w=a(5),S=a(276),F=a(114),C=a(279),E=a(112),z=a(73),R=a(144),B=a.n(R),D=a(106),A=a.n(D),P=a(142),I=a.n(P),T=a(108),V=a.n(T),M=a(91),U=a.n(M),L=a(143),G=a.n(L),J=a(146),K=a.n(J),H=a(149),W=a.n(H),_=a(147),q=a.n(_),Q=a(290),X=a(107),Y=a.n(X),Z=a(148),$=a.n(Z),ee=a(145),te=a.n(ee),ae=a(283),ie=a(291),ne=a(104),re=a(0),ce=a(133),oe=a.n(ce),se=a(134),le=(a(131),a(289)),de=a(275),be=a(274),je=a(138),ue=a(141),ve=a.n(ue),he=a(137),pe=a.n(he),me=a(135),Oe=a(3),xe=.01,fe="Event: ";function ge(e){return 1e3*e}function ye(e){var t=e.toFixed(2);return isNaN(t)&&(t=0),"".concat(e.toFixed(2),"ms")}var ke=Object(N.a)((function(e){return{root:{flexGrow:1,margin:"auto",maxWidth:"600px"},accordion:{margin:"auto",maxWidth:"840px",marginBottom:"20px"},details:{flexDirection:"column"},paper:{padding:e.spacing(1),fontSize:"12px",textAlign:"center",backgroundColor:e.palette.primary.main,color:e.palette.secondary.contrastText,flexBasis:"25%"},control:{padding:e.spacing(2)}}})),Ne=function(e){var t=Object(re.useState)([]),a=Object(l.a)(t,2),r=a[0],c=a[1],o=Object(re.useState)([]),s=Object(l.a)(o,2),b=s[0],j=s[1],u=Object(re.useState)(0),v=Object(l.a)(u,2),h=v[0],p=v[1],m=Object(re.useState)(0),x=Object(l.a)(m,2),f=x[0],g=x[1],y=Object(re.useState)({}),k=Object(l.a)(y,2),N=k[0],w=k[1],S=Object(re.useState)({}),F=Object(l.a)(S,2),C=(F[0],F[1]),R=Object(i.useGlobal)("state"),B=Object(l.a)(R,2),D=B[0],A=B[1],P=ke();Object(re.useEffect)((function(){var e=setInterval((function(){r.length!==f&&(g(r.length),I())}),250);return function(){return clearInterval(e)}}));var I=function(){var e=r.filter((function(e){return"string"===typeof e[0]&&"Meta"!==e[1]})),t=[];e.forEach((function(e){-1===t.indexOf(e[0])&&t.push(e[0])}));var a=[],i=D.keybinds,n=0;t.forEach((function(t){var r,c=0,o=e.filter((function(e){return e[0]===t}));i.filter((function(e){return e.behavior===t})).order;console.log("Finding derived fields for ".concat(t,". Found ").concat(o.length," event(s).")),r=o.length,o.forEach((function(e){c+=e[3]-e[2]}));var s=c/r;0===r&&(s=0);var l={id:n,order:null,behavior:t,occurrences:r,totalDuration:c,avgDuration:s};0==b.length&&a.push(l),a.push(l),n++})),a.sort((function(e,t){if(void 0!==e.order&&void 0!==t.order)return e.order>t.order?1:-1;var a=e.behavior.toUpperCase(),i=t.behavior.toUpperCase();return a<i?-1:a>i?1:0})),j((function(e){return a})),D.derivedFields=b},T=function(e){return e.end-e.start<xe&&(e.end+=xe),D.data.events.forEach((function(t){t.id!==e.id&&t.behavior===e.behavior&&(t.start===e.start&&(console.warn("Adjusted event start time due to existing similar events: "+e.id),e.start+=.011),t.behavior===e.behavior&&t.end===e.start&&(console.warn("Adjusted event start time due to existing similar events: "+e.id),e.start+=.001),t.end===e.end&&(console.warn("Adjusted event end time due to existing similar events: "+e.id),e.end+=.011))})),[e.behavior,fe+e.id,ge(e.start),ge(e.end)]};Object(re.useEffect)((function(){var e=""!==D.dataFileName,t=0===r.length,a=D.data.events&&0===D.data.events.length;if(e||0===r.length||(c([]),j([])),e&&t){var i=[[{type:"string",id:"Behavior"},{type:"string",id:"Event"},{type:"number",id:"Start"},{type:"number",id:"End"}],["Behavior","Meta",0,ge(D.data.metadata.duration)]];if(D.isVideo&&a)D.keybinds.forEach((function(e){i.push([e.behavior,"Meta",0,0])}));else if(!a){var n=[];D.data.events.forEach((function(e){-1===n.indexOf(e.behavior)&&n.push(e.behavior)})),console.log(JSON.stringify(n)),n.sort((function(e,t){var a=e.toUpperCase(),i=t.toUpperCase();return a<i?-1:a>i?1:0})),n.forEach((function(e){i.push([e,"Meta",0,0])}))}p(i.length),c(i)}var o=D.data.events&&D.data.events.length>0,s=D.data.events.length+h>r.length;if(o&&s){for(var l,d,b=D.data.events.length+h-r.length,u=[];b>0;)l=D.data.events[D.data.events.length-b],d=T(l),u.push(d),b--;c((function(e){return e.concat(u)}))}}));var V=[{field:"behavior",headerName:"Behavior",width:200},{field:"occurrences",headerName:"Occurrences",type:"number",width:200,valueFormatter:function(e){return e.value}},{field:"avgDuration",headerName:"Avg Duration",type:"number",width:200,valueFormatter:function(e){return ye(e.value)}},{field:"totalDuration",headerName:"Total Duration",type:"number",width:200,valueFormatter:function(e){return ye(e.value)}}],M=function(e,t){"clickaway"!==t&&(w({active:!1}),C({active:!1}))};return Object(Oe.jsxs)("div",{className:"Row",children:[""!==e.state.dataFileName&&Object(Oe.jsxs)(le.a,{className:P.accordion,children:[Object(Oe.jsx)(be.a,{expandIcon:Object(Oe.jsx)(pe.a,{}),"aria-controls":"derivedfields-content",children:Object(Oe.jsx)(z.a,{variant:"caption",children:"Derived Fields"})}),Object(Oe.jsx)(de.a,{className:P.accordion,children:Object(Oe.jsx)("div",{style:{height:b.length>0?55*b.length+3:75,width:"100%"},children:Object(Oe.jsx)(je.a,{rows:b,columns:V,autoPageSize:!0,density:"compact",hideFooter:!0})})})]}),Object(Oe.jsx)("div",{id:"chart-container",className:"GoogleChart",children:r.length>1&&Object(Oe.jsx)(me.a,{readonly:!0,width:"840px",height:"400px",chartType:"Timeline",data:r,options:{timeline:{colorByRowLabel:!0,margin:"auto",showBarLabels:!1},colors:["transparent","#469FAE","#3ECDB6","#C09BD8","#F67E5C","#CA1252","#DD5B5C","#D9959A","#938D99","#5E614A"]},rootProps:{"data-testid":"6"},chartEvents:[{eventName:"select",callback:function(e){var t=e.chartWrapper.getChart().getSelection()[0],a=r[t.row+1],i={behavior:a[0],id:a[1],start:a[2],end:a[3],active:!0};"Meta"!==i.id&&w(i),console.log(i)}}]})}),Object(Oe.jsx)("div",{children:Object(Oe.jsx)(Q.a,{readOnly:!0,open:N.active,autoHideDuration:null,onClose:M,message:"Selected: ".concat(N.id),action:Object(Oe.jsxs)(n.a.Fragment,{children:[Object(Oe.jsx)(E.a,{title:"Delete Event",children:Object(Oe.jsx)(O.a,{size:"small","aria-label":"delete",color:"secondary",onClick:function(){var e=r.filter((function(e){return e[1]!==N.id}));c(e);var t=parseInt(N.id.replace(fe,"")),a=D.data.events.filter((function(e){return e.id!==t}));A(Object(d.a)(Object(d.a)({},D),{},{data:{events:a,metadata:Object(d.a)({},D.data.metadata)}})),C(N),w({active:!1})},children:Object(Oe.jsx)(U.a,{fontSize:"small"})})}),Object(Oe.jsx)(E.a,{title:"Cancel",children:Object(Oe.jsx)(O.a,{size:"small","aria-label":"close",color:"inherit",onClick:M,children:Object(Oe.jsx)(ve.a,{fontSize:"small"})})})]})})})]})},we=a(50),Se=Object(we.b)({palette:{primary:{500:"#469FAE"}}}),Fe=["32"," "],Ce=Object(N.a)((function(e){return{content:{marginTop:"55px"},reactPlayer:{margin:"auto"},slider:{margin:"0px 20px",width:"80%"},dataText:{height:"420px",width:"840px",overflow:"scroll",margin:"auto",border:"1px solid ".concat(e.palette.divider),borderRadius:e.shape.borderRadius},button:{padding:0},largeButton:{display:"inline-block",margin:"auto","& svg":{fontSize:144}},toolbar:{minHeight:48,maxHeight:48},restrictedText:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",margin:"0px 10px",maxWidth:"300px"},title:{flexGrow:1},bottomAppBar:{top:"auto",bottom:0},bottomToolbar:{margin:"auto",minWidth:"800px",textAlign:"center",minHeight:32,maxHeight:32},menu:{width:"fit-content",border:"1px solid ".concat(e.palette.divider),borderRadius:e.shape.borderRadius,"& svg":{margin:e.spacing(1.5)},"& hr":{margin:e.spacing(0,.5)}}}})),Ee=Object(w.a)({paper:{border:"1px solid #d3d4d5",width:"200px",margin:"0px 10px"}})((function(e){return Object(Oe.jsx)(y.a,Object(d.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"}},e))})),ze=function(){var e=!1,t=Object(re.useState)({}),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(re.useState)(null),y=Object(l.a)(c,2),N=y[0],w=y[1],R=Object(re.useState)({}),D=Object(l.a)(R,2),P=D[0],T=D[1],M=Object(i.useGlobal)("state"),L=Object(l.a)(M,2),J=L[0],H=L[1];Object(re.useEffect)((function(){var e=JSON.parse(localStorage.getItem("keybinds"))||void 0;e&&Array.isArray(e)&&H(Object(d.a)(Object(d.a)({},J),{},{keybinds:e}))}),[]);var _=function(){return window.confirm("Are you sure you wish to reset the existing video? Unsaved data will be lost.")},X=function(){me.current.value="",H(Object(d.a)(Object(d.a)({},J),{},{dataFileName:"",isVideo:!1,isPlaying:!1,data:{metadata:{},events:[]}}))};var Z=Boolean(N),ee=function(e){localStorage.setItem("keybinds",JSON.stringify(e));var t=JSON.parse(localStorage.getItem("keybinds"))||void 0;t&&Array.isArray(t)&&H(Object(d.a)(Object(d.a)({},J),{},{keybinds:t}))},ce=function(e){return function(t){var a=t.target.value;if(void 0!==a){if("order"!==e||""===a||isNaN(a)||(a=parseInt(a)),"key"===e)if(J.keybinds.find((function(e){return e.key===a})))return void r(Object(d.a)(Object(d.a)({},n),{},{keyError:!0}));if("behavior"===e)if(J.keybinds.find((function(e){return e.behavior===a})))return void r(Object(d.a)(Object(d.a)({},n),{},{behaviorError:!0}));r((function(t){return t=Object(d.a)(Object(d.a)({},t),{},Object(s.a)({},e,a)),"behavior"===e&&t.behaviorError&&(t.behaviorError=!1),"key"===e&&t.keyError&&(t.keyError=!1),t}))}}},le=function(){w(null)},de=function(e){if(console.log("Preparing to select video"),""!==J.dataFileName){if(console.log("Previous video found. Prompting user to confirm video reset."),!_())return void console.log("Video reset was declined.");console.log("Video reset was confirmed.")}X(),me.current.click()},be=function(){(""===J.dataFileName||_())&&(X(),xe.current.click())},je=function(){H(Object(d.a)(Object(d.a)({},J),{},{isPlaying:!0}))},ue=function(e,t){J.keybinds.forEach((function(a){a.key===String(e)&&t(a)}))},ve=function(e){if(!e.active){e.active=!0;var t={key:e.key,behavior:e.behavior,order:e.order,start:parseFloat(J.playedSeconds.toFixed(3))},a=J.activeRecords;a.push(t),H(Object(d.a)(Object(d.a)({},J),{},{activeRecords:a}))}},he=function(e){var t=J.activeRecords.find((function(t){return t.key===e.key})),a=J.activeRecords.filter((function(t){return t.key!==e.key}));if(t){var i=J.playedSeconds.toFixed(3),n=Math.max.apply(Math,J.data.events.map((function(e){return e.id})));n=isFinite(n)?n+1:0,e.active=!1,t.id=n,t.end=parseFloat(i);var r=J.data.events;r.push(t),H(Object(d.a)(Object(d.a)({},J),{},{activeRecords:a,data:{events:r,metadata:Object(d.a)({},J.data.metadata)}}))}};Object(ne.a)("keydown",(function(t){""!==J.videoFilePath&&J.isVideo&&Fe.includes(String(t.key))?(t.preventDefault(),e=!e):J.isVideo&&J.isPlaying&&ue(t.key,ve)})),Object(ne.a)("keyup",(function(e){var t=e.key;ue(t,he)}));var pe=Ce(),me=Object(re.useRef)(null),xe=Object(re.useRef)(null),fe=Object(re.useState)(null),ge=Object(l.a)(fe,2),ye=ge[0],ke=ge[1];return Object(Oe.jsxs)(S.a,{theme:Se,children:[Object(Oe.jsx)(h.a,{}),Object(Oe.jsxs)("div",{className:"App",children:[Object(Oe.jsx)("input",{type:"file",ref:me,onChange:function(e){console.log("Preparing to upload video: ".concat(e.target.files[0].name));var t=e.target.files[0],a=t.name;if(t&&["mp4","ogg","webm","mpeg"].includes(a.split(".").pop().toLowerCase())){var i=document.createElement("video"),n=URL.createObjectURL(t);i.src=n,i.addEventListener("loadedmetadata",(function(e){var t=parseFloat(i.duration.toFixed(2));H(Object(d.a)(Object(d.a)({},J),{},{videoFilePath:n,dataFileName:a,isVideo:!0,data:{metadata:{fileName:a,scoringDate:Date.now(),scoringDateText:(new Date).toISOString(),duration:t},events:[]}})),document.activeElement.blur()}))}else{var r="Selected file was not recognized as a valid video format.";console.log(r),T({active:!0,message:r})}},style:{display:"none"}}),Object(Oe.jsx)("input",{type:"file",ref:xe,onChange:function(e){var t=new FileReader;t.readAsText(e.target.files[0],"UTF-8");var a=e.target.files[0].name;t.onload=function(e){var t=JSON.parse(e.target.result);t.events&&Array.isArray(t.events)&&t.metadata&&t.metadata.fileName?H(Object(d.a)(Object(d.a)({},J),{},{dataFileName:a,data:t})):console.warn("Selected data not valid.")}},style:{display:"none"}}),Object(Oe.jsxs)(Ee,{className:pe.popoverMenu,anchorEl:ye,keepMounted:!0,open:Boolean(ye),onClose:function(){ke(null)},children:[Object(Oe.jsx)(g.a,{primary:"Settings",align:"center",disabled:!0}),Object(Oe.jsx)(g.a,{secondary:"Video Size",align:"center",disabled:!0}),Object(Oe.jsx)(m.a,{align:"center",style:{paddingBottom:"8px"},children:Object(Oe.jsxs)(ie.a,{size:"small",value:J.videoSize||"840px",align:"center",exclusive:!0,onChange:function(e,t){t!==J.videoSize&&H(Object(d.a)(Object(d.a)({},J),{},{videoSize:t}))},"aria-label":"video-size-togglegroup",children:[Object(Oe.jsx)(ae.a,{value:"600px","aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"600px"})}),Object(Oe.jsx)(ae.a,{value:"840px","aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"840px"})}),Object(Oe.jsx)(ae.a,{value:"1080px","aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"1080px"})})]})}),Object(Oe.jsx)(g.a,{secondary:"Playback Speed",align:"center",disabled:!0}),Object(Oe.jsx)(m.a,{align:"center",style:{paddingBottom:"8px"},children:Object(Oe.jsxs)(ie.a,{size:"small",value:J.playbackRate||1,align:"center",exclusive:!0,onChange:function(e,t){t!==J.playbackRate&&H(Object(d.a)(Object(d.a)({},J),{},{playbackRate:parseFloat(t)}))},"aria-label":"playback-rate-togglegroup",children:[Object(Oe.jsx)(ae.a,{value:.5,"aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"0.5x"})}),Object(Oe.jsx)(ae.a,{value:1,"aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"1.0x"})}),Object(Oe.jsx)(ae.a,{value:1.5,"aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"1.5x"})}),Object(Oe.jsx)(ae.a,{value:2,"aria-label":"centered",children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",children:"2.0x"})})]})}),Object(Oe.jsx)(g.a,{secondary:"Keybinds",align:"center",disabled:!0}),Object(Oe.jsxs)(x.a,{component:"nav","aria-label":"keybinds-list",className:pe.root,style:{paddingTop:"0px"},dense:!0,children:[Object(Oe.jsx)(f.a,{dense:!0,children:Object(Oe.jsx)(g.a,{primary:"Pause/Resume",secondary:"keybind: space"})}),Object(Oe.jsx)(k.a,{open:Z,anchorEl:N,disableRestoreFocus:!0,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"},children:Object(Oe.jsxs)(j.a,{className:pe.root,variant:"outlined",children:[Object(Oe.jsxs)(v.a,{children:[Object(Oe.jsx)(g.a,{primary:"Edit Keybind",secondary:"Changes are saved to your browser cache"}),Object(Oe.jsx)(F.a,{id:"keybind-behavior-input",variant:"outlined",size:"small",error:!!n.behaviorError,helperText:n.behaviorError?"Invalid value":"",label:"Behavior Name",defaultValue:n.behavior,onChange:ce("behavior")}),Object(Oe.jsx)(F.a,{id:"keybind-key-input",variant:"outlined",size:"small",error:!!n.keyError,helperText:n.keyError?"Invalid value":"",label:"Key",inputProps:{maxLength:1},defaultValue:n.key,onChange:ce("key")})]}),Object(Oe.jsxs)(u.a,{children:[Object(Oe.jsx)(E.a,{title:"Accept",children:Object(Oe.jsx)(O.a,{size:"small",className:pe.smallButton,color:"primary",disabled:!(!n.keyError&&!n.behaviorError),onClick:function(e){var t=J.keybinds,a=t.findIndex((function(e){return e.id===n.id}));t[a]=n,H(Object(d.a)(Object(d.a)({},J),{},{keybinds:t})),ee(t),le()},children:Object(Oe.jsx)(I.a,{fontSize:"small"})})}),Object(Oe.jsx)(E.a,{title:"Cancel",children:Object(Oe.jsx)(O.a,{size:"small",color:"secondary",onClick:le,children:Object(Oe.jsx)(A.a,{fontSize:"small"})})})]})]})}),J.keybinds.map((function(e){return Object(Oe.jsxs)(f.a,{dense:!0,children:[Object(Oe.jsx)(g.a,{primary:e.behavior,secondary:"keybind: ".concat(e.key)}),Object(Oe.jsx)(E.a,{title:"Edit Keybind",children:Object(Oe.jsx)(O.a,{size:"small",color:"primary",onClick:function(t){return function(e,t){r(t),w(e.currentTarget)}(t,e)},children:Object(Oe.jsx)(G.a,{fontSize:"small"})})}),Object(Oe.jsx)(E.a,{title:"Delete Keybind",children:Object(Oe.jsx)(O.a,{size:"small",color:"secondary",onClick:function(t){return function(e,t){if(window.confirm("Are you sure you wish to delete this keybind?")){var a=J.keybinds.filter((function(e){return e.id!==t.id}));H(Object(d.a)(Object(d.a)({},J),{},{keybinds:a})),ee(a)}}(0,e)},children:Object(Oe.jsx)(U.a,{fontSize:"small"})})})]},e.id)})),Object(Oe.jsxs)(m.a,{align:"center",children:[Object(Oe.jsx)(E.a,{title:"Add New Keybind",children:Object(Oe.jsx)(O.a,{color:"primary",size:"small",onClick:function(){var e=J.keybinds,t=Math.max.apply(Math,e.map((function(e){return e.id})));t=isFinite(t)?t+1:0;var a=Math.max.apply(Math,e.map((function(e){return e.order})));a=isFinite(a)?a+1:0,e.push({id:t,key:"0",order:a,behavior:"New Behavior",active:!1}),H(Object(d.a)(Object(d.a)({},J),{},{keybinds:e})),ee(e)},children:Object(Oe.jsx)(B.a,{fontSize:"small"})})}),Object(Oe.jsx)(E.a,{title:"Reset to Defaults",children:Object(Oe.jsx)(O.a,{color:"primary",size:"small",onClick:function(){window.confirm("Are you sure you wish to clear local settings?")&&(localStorage.clear(),H(Object(d.a)(Object(d.a)({},J),{},{keybinds:o.Keybinds})))},children:Object(Oe.jsx)(te.a,{fontSize:"small"})})})]})]})]}),Object(Oe.jsx)(b.a,{position:"fixed",color:"primary",children:Object(Oe.jsxs)(C.a,{className:pe.toolbar,children:[Object(Oe.jsx)(z.a,{variant:"h5",component:"h1",className:pe.title,children:"Video Keypress"}),Object(Oe.jsxs)(m.a,{container:!0,alignItems:"center",className:pe.menu,children:[J.dataFileName&&Object(Oe.jsx)(E.a,{title:J.dataFileName,children:Object(Oe.jsxs)(m.a,{item:!0,children:[Object(Oe.jsxs)(z.a,{variant:"caption",display:"block",className:pe.restrictedText,children:["Current ",J.isVideo?"Video":"Data",":"]}),Object(Oe.jsx)(z.a,{variant:"overline",display:"block",className:pe.restrictedText,children:J.dataFileName})]})}),J.dataFileName&&Object(Oe.jsx)(p.a,{orientation:"vertical",flexItem:!0}),J.dataFileName&&Object(Oe.jsx)(E.a,{title:"Download Data",children:Object(Oe.jsx)(O.a,{"aria-label":"download data",color:"inherit",className:pe.button,onClick:function(){if(J.data.events&&J.data.events.length>0){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(J.data)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",J.dataFileName+"-scored-behavior.json"),document.body.appendChild(t),t.click(),t.remove()}},children:Object(Oe.jsx)(K.a,{})})}),J.dataFileName&&Object(Oe.jsx)(p.a,{orientation:"vertical",flexItem:!0}),J.dataFileName&&Object(Oe.jsx)(E.a,{title:"Download SVG",children:Object(Oe.jsx)(O.a,{"aria-label":"download svg",color:"inherit",className:pe.button,onClick:function(){if(J.data.events&&J.data.events.length>0){var e=document.getElementById("chart-container").getElementsByTagName("svg")[0].outerHTML;e=e.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"');var t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download=J.dataFileName+"-scored-behavior.svg",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},children:Object(Oe.jsx)(q.a,{})})}),J.dataFileName&&Object(Oe.jsx)(p.a,{orientation:"vertical",flexItem:!0}),J.dataFileName&&Object(Oe.jsx)(E.a,{title:"Reset Video",children:Object(Oe.jsx)(O.a,{"aria-label":"Reset video",color:"inherit",className:pe.button,onClick:function(){_()&&X()},children:Object(Oe.jsx)(A.a,{})})}),J.dataFileName&&Object(Oe.jsx)(p.a,{orientation:"vertical",flexItem:!0}),Object(Oe.jsx)(E.a,{title:"Select Video",children:Object(Oe.jsx)(O.a,{"aria-label":"select video",color:"inherit",className:pe.button,onClick:function(e){return de()},children:Object(Oe.jsx)(Y.a,{})})}),Object(Oe.jsx)(p.a,{orientation:"vertical",flexItem:!0}),Object(Oe.jsx)(E.a,{title:"Select Data",children:Object(Oe.jsx)(O.a,{"aria-label":"select data",color:"inherit",className:pe.button,onClick:be,children:Object(Oe.jsx)(V.a,{})})}),Object(Oe.jsx)(p.a,{orientation:"vertical",flexItem:!0}),Object(Oe.jsx)(E.a,{title:"Settings",children:Object(Oe.jsx)(O.a,{"aria-label":"settings",color:"inherit","aria-haspopup":"true",onClick:function(e){ke(e.currentTarget)},className:pe.button,children:Object(Oe.jsx)($.a,{})})})]})]})}),Object(Oe.jsxs)("div",{className:pe.content,children:[!J.dataFileName&&Object(Oe.jsxs)("div",{align:"center",children:[Object(Oe.jsx)(z.a,{variant:"caption",display:"block",align:"center",gutterBottom:!0,children:"Please select a video or select data from a previous session!"}),Object(Oe.jsx)(E.a,{title:"Select Video",align:"center",children:Object(Oe.jsx)(O.a,{"aria-label":"select video",color:"primary",className:pe.largeButton,onClick:function(e){return de()},children:Object(Oe.jsx)(Y.a,{})})}),Object(Oe.jsx)(E.a,{title:"Select Data",align:"center",children:Object(Oe.jsx)(O.a,{"aria-label":"select video",color:"primary",className:pe.largeButton,onClick:function(e){return be()},children:Object(Oe.jsx)(V.a,{})})})]}),Object(Oe.jsx)("div",{className:"Row",children:Object(Oe.jsxs)("div",{className:"VideoPlay",children:[J.dataFileName&&!J.isVideo&&Object(Oe.jsx)("div",{className:pe.dataText,children:Object(Oe.jsx)("pre",{children:JSON.stringify(J.data,void 0,2)})}),J.dataFileName&&J.isVideo&&Object(Oe.jsx)(oe.a,{url:J.videoFilePath,className:pe.reactPlayer,playing:e,width:J.videoSize,height:"100%",autoPlay:!1,muted:!0,controls:!0,onDuration:function(e){H(Object(d.a)(Object(d.a)({},J),{},{duration:e}))},onProgress:function(e){H(Object(d.a)(Object(d.a)({},J),{},{playedSeconds:e.playedSeconds,loadedSeconds:e.loadedSeconds}))},playbackRate:J.playbackRate||1,onPause:function(){H(Object(d.a)(Object(d.a)({},J),{},{isPlaying:!1}))},onStart:je,onPlay:je}),Object(Oe.jsx)("div",{className:"Row",children:Object(Oe.jsx)(Ne,{state:J})})]})})]}),Object(Oe.jsx)(Q.a,{readOnly:!0,open:P.active,onClose:function(e,t){T({active:!1})},autoHideDuration:3e3,message:P.message}),Object(Oe.jsx)(b.a,{position:"fixed",color:"primary",className:pe.bottomAppBar,children:Object(Oe.jsx)(C.a,{className:pe.bottomToolbar,children:Object(Oe.jsxs)(m.a,{container:!0,alignItems:"center",spacing:2,children:[Object(Oe.jsx)(m.a,{item:!0,xs:6,children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",gutterBottom:!0,children:"No data is transferred. All data remains in your browser."})}),Object(Oe.jsx)(m.a,{item:!0,xs:1,children:Object(Oe.jsx)(E.a,{title:"Visit GitHub Repo",children:Object(Oe.jsx)(O.a,{"aria-label":"visit github repo",color:"inherit",className:pe.button,onClick:function(){window.open("https://github.com/zacran/video-keypress","_blank")},children:Object(Oe.jsx)(W.a,{})})})}),Object(Oe.jsx)(m.a,{item:!0,xs:1,children:Object(Oe.jsxs)(z.a,{variant:"caption",align:"center",gutterBottom:!0,children:["v",se.version]})}),Object(Oe.jsx)(m.a,{item:!0,xs:3,children:Object(Oe.jsx)(z.a,{variant:"caption",align:"center",gutterBottom:!0,children:"GNU General Public License"})})]})})})]})]})};Object(i.setGlobal)({state:{dataFileName:"",isVideo:!1,isPlaying:!1,duration:0,playedSeconds:0,loadedSeconds:0,playbackRate:1,videoSize:"840px",keybinds:o.Keybinds,data:{recordedEvents:0,metadata:{},events:[]},activeRecords:[],derivedFields:[]}}),c.a.render(Object(Oe.jsx)(ze,{}),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.68f27678.chunk.js.map