{"version":3,"sources":["hooks/keybindMap.js","components/Chart.js","App.js","index.js"],"names":["Keybinds","key","code","order","color","r","g","b","a","behavior","active","MIN_EVENT_DURATION","convertToMilliseconds","value","formatTime","fixedValue","toFixed","isNaN","useStyles","makeStyles","theme","root","flexGrow","margin","maxWidth","paper","padding","spacing","fontSize","textAlign","palette","text","secondary","control","Chart","props","useState","formattedData","setFormattedData","derivedFields","setDerivedFields","cachedFormattedDataSize","setCachedFormattedDataSize","classes","useEffect","interval","setInterval","length","data","filter","obj","console","log","uniqueBehaviors","forEach","event","indexOf","push","tempDerivedFields","keybindMap","KeybindMap","occurences","totalDuration","matchingEvents","keybind","avgDuration","derivedField","sort","state","computeDerivedFields","clearInterval","isVideoLoaded","videoFilePath","areEventsEmpty","events","headerRows","type","id","metadata","duration","keybinds","eventsExist","newEventExists","latestEvent","end","start","warn","formattedEvent","className","map","Grid","container","item","xs","Paper","Typography","variant","display","gutterBottom","align","width","height","chartType","options","timeline","colorByRowLabel","showBarLabels","colors","rootProps","SPACE_KEYS","content","marginTop","reactPlayer","popoverMenu","slider","button","smallButton","largeButton","toolbar","minHeight","maxHeight","title","bottomAppBar","top","bottom","bottomToolbar","minWidth","menu","border","divider","borderRadius","shape","StyledMenu","withStyles","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","backgroundColor","primary","main","common","white","MenuItem","App","isPlayingBuffer","isPlaying","playedSeconds","loadedSeconds","playbackRate","activeRecords","setState","confirmVideoReset","window","confirm","resetData","hiddenInput","current","videoFileName","handleVideoSelect","click","handleOnStartPlay","handleKeyevent","callback","String","recordKeydown","activity","recordKeyup","find","dataEvents","useEventListener","includes","preventDefault","useRef","anchorKeybinds","setAnchorKeybinds","anchorSettings","setAnchorSettings","ref","onChange","uploadedFile","target","files","video","document","createElement","URL","createObjectURL","src","addEventListener","parseFloat","name","fileName","scoringDate","Date","now","scoringDateText","toISOString","activeElement","blur","style","anchorEl","keepMounted","open","Boolean","onClose","ListItemText","Slider","getAriaValueText","aria-labelledby","step","marks","min","max","valueLabelDisplay","AppBar","position","background","Toolbar","component","alignItems","Tooltip","IconButton","aria-label","onClick","e","Divider","orientation","flexItem","dataStr","encodeURIComponent","JSON","stringify","downloadAnchorNode","setAttribute","body","appendChild","remove","svgData","getElementById","getElementsByTagName","outerHTML","replace","svgBlob","Blob","svgUrl","downloadLink","href","download","removeChild","aria-haspopup","currentTarget","url","playing","controls","onDuration","onProgress","progress","onPause","onStart","onPlay","ReactDOM","render"],"mappings":"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","file":"static/js/main.3b51a0bc.chunk.js","sourcesContent":["const Keybinds = {\n    Keybinds: [\n        { key: '1', code: '49', order: 1, color: { r: '241', g: '112', b: '19', a: '1' }, behavior: \"Behavior1\", active: false },\n        { key: '2', code: '50', order: 2, color: { r: '41', g: '112', b: '200', a: '1' }, behavior: \"Behavior2\", active: false },\n        { key: '3', code: '51', order: 3, color: { r: '41', g: '112', b: '200', a: '1' }, behavior: \"Behavior3\", active: false }\n    ]\n};\n\nexport default Keybinds;","import React, { useState, useEffect } from \"react\";\nimport { Chart as GoogleChart } from \"react-google-charts\";\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport KeybindMap from \"../hooks/keybindMap\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport \"../App.css\";\n\nconst COMPUTE_DERIVED_FIELDS_INTERVAL = 500;\nconst MIN_EVENT_DURATION = 0.1;\n\nfunction convertToMilliseconds(value) {\n    return value * 1000\n}\n\nfunction formatTime(value) {\n    var fixedValue = value.toFixed(2);\n    if (isNaN(fixedValue)) fixedValue = 0;\n    return `${value.toFixed(2)}ms`;\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n        margin: 'auto',\n        maxWidth: '600px'\n    },\n    paper: {\n        padding: theme.spacing(1),\n        fontSize: '12px',\n        textAlign: 'center',\n        color: theme.palette.text.secondary,\n    },\n    control: {\n        padding: theme.spacing(2),\n    },\n}));\n\nconst Chart = (props) => {\n    const [formattedData, setFormattedData] = useState([]);\n    const [derivedFields, setDerivedFields] = useState([]);\n    const [cachedFormattedDataSize, setCachedFormattedDataSize] = useState(0);\n\n    const classes = useStyles();\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            if (formattedData.length !== cachedFormattedDataSize) {\n                setCachedFormattedDataSize(formattedData.length);\n                computeDerivedFields();\n            }\n        }, COMPUTE_DERIVED_FIELDS_INTERVAL);\n        return () => clearInterval(interval);\n    });\n\n    function computeDerivedFields() {\n        // Remove header row of formatted data\n        var data = formattedData.filter(obj => typeof obj[0] === 'string' && obj[1] !== 'Meta');\n        console.log(formattedData);\n\n        // Find unqiue behaviors in existing data\n        const uniqueBehaviors = [];\n        data.forEach(event => {\n            if (uniqueBehaviors.indexOf(event[0]) === -1) {\n                uniqueBehaviors.push(event[0])\n            }\n        });\n\n        var tempDerivedFields = [];\n        const keybindMap = KeybindMap.Keybinds;\n\n        // Derive fields for each unique behavior\n        uniqueBehaviors.forEach(behavior => {\n            var occurences = 0, totalDuration = 0;\n            var matchingEvents = data.filter(event => event[0] === behavior);\n            var order = keybindMap.filter(keybind => keybind.behavior === behavior).order;\n            console.log(\"finding derived fields for \" + behavior + \" found \" + matchingEvents.length + \" events\");\n\n            occurences = matchingEvents.length;\n\n            matchingEvents.forEach(event => {\n                totalDuration += (event[3] - event[2]);\n            });\n\n            var avgDuration = (totalDuration / occurences);\n            if (occurences === 0) avgDuration = 0;\n\n            var derivedField = {\n                order: order,\n                behavior: behavior,\n                occurences: occurences,\n                totalDuration: totalDuration,\n                avgDuration: avgDuration\n            }\n\n            tempDerivedFields.push(derivedField);\n        });\n\n        // Sort derived fields by order property\n        tempDerivedFields.sort((a, b) => (a.order > b.order) ? 1 : -1);\n\n        setDerivedFields((derivedFields) => {\n            derivedFields = tempDerivedFields;\n            console.log(derivedFields);\n\n            return derivedFields;\n        });\n        props.state.derivedFields = derivedFields;\n    };\n\n    useEffect(() => {\n        var isVideoLoaded = (props.state.videoFilePath !== '');\n        var areEventsEmpty = (formattedData.length === 0 && props.state.data.events && props.state.data.events.length === 0);\n\n        // Video has been cleared, reset the chart\n        if (!isVideoLoaded && formattedData.length !== 0) {\n            setFormattedData([]);\n            setDerivedFields([]);\n        }\n\n        if (isVideoLoaded && areEventsEmpty) {\n            var headerRows = [\n                [\n                    { type: 'string', id: 'Behavior' },\n                    { type: 'string', id: 'Event' },\n                    { type: 'number', id: 'Start' },\n                    { type: 'number', id: 'End' },\n                ],\n                [\n                    \"Behavior\", \"Meta\", 0, convertToMilliseconds(props.state.data.metadata.duration)\n                ]\n            ];\n\n            // Adding empty Behavior records to force a consistent order\n            props.state.keybinds.forEach(obj => {\n                headerRows.push([obj.behavior, \"Meta\", 0, 0]);\n            });\n            setFormattedData(headerRows);\n        }\n\n        // Check if events exist to avoid running code when idle\n        var eventsExist = (props.state.data.events && props.state.data.events.length > 0);\n        // Check if a new event exists -- length of data.events plus 2 base header rows\n        var newEventExists = (props.state.data.events.length + (2 + props.state.keybinds.length) > formattedData.length);\n\n        // Add new event and compute derived fields when new record is persisted\n        if (eventsExist && newEventExists) {\n            // Get latest row\n            var latestEvent = props.state.data.events[props.state.data.events.length - 1];\n\n            // for display purposes, set a minimum value for durations\n            if ((latestEvent.end - latestEvent.start) < MIN_EVENT_DURATION) latestEvent.end += MIN_EVENT_DURATION;\n\n            // Seach existing records for similar start, end, duration times and adjust by the MIN_EVENT_DURATION\n            // This is to account for key presses that happen faster than the update cycle of React\n            props.state.data.events.forEach(obj => {\n                if (obj.id !== latestEvent.id) {\n                    if (obj.start === latestEvent.start) {\n                        console.warn(\"Adjusted event start time due to existing similar events: \" + latestEvent.id);\n                        latestEvent.start += (MIN_EVENT_DURATION + (0.1 * MIN_EVENT_DURATION));\n                    }\n\n                    if (obj.behavior === latestEvent.behavior && obj.end === latestEvent.start) {\n                        console.warn(\"Adjusted event start time due to existing similar events: \" + latestEvent.id);\n                        latestEvent.start += (0.1 * MIN_EVENT_DURATION);\n                    }\n\n                    if (obj.end === latestEvent.end) {\n                        console.warn(\"Adjusted event end time due to existing similar events: \" + latestEvent.id);\n                        latestEvent.end += (MIN_EVENT_DURATION + (0.1 * MIN_EVENT_DURATION));\n                    }\n                }\n            });\n\n            var formattedEvent = [\n                latestEvent.behavior,\n                \"Event: #\" + latestEvent.id,\n                convertToMilliseconds(latestEvent.start),\n                convertToMilliseconds(latestEvent.end)\n            ];\n            setFormattedData(formattedData => [...formattedData, formattedEvent]);\n        }\n    });\n\n    return (\n        <div className=\"Row\">\n            {derivedFields.length > 0 ?\n                derivedFields.map((derivedField) =>\n                    <Grid container className={classes.root} spacing={2} key={derivedField.behavior}>\n                        <Grid item xs={3}>\n                            <Paper className={classes.paper}>\n                                <Typography variant=\"caption\" display=\"inline\" gutterBottom>    Behavior:   </Typography>\n                                <Typography variant=\"subtitle2\" display=\"block\" align=\"center\" gutterBottom >{derivedField.behavior}</Typography>\n                            </Paper>\n                        </Grid>\n                        <Grid item xs={3}>\n                            <Paper className={classes.paper}>\n                                <Typography variant=\"caption\" display=\"inline\" gutterBottom>    Occurences: </Typography>\n                                <Typography variant=\"subtitle2\" display=\"block\" align=\"center\" gutterBottom >{derivedField.occurences}</Typography>\n                            </Paper>\n                        </Grid>\n                        <Grid item xs={3}>\n                            <Paper className={classes.paper}>\n                                <Typography variant=\"caption\" display=\"inline\" gutterBottom>    Avg Duration:   </Typography>\n                                <Typography variant=\"subtitle2\" display=\"block\" align=\"center\" gutterBottom >{formatTime(derivedField.avgDuration)}</Typography>\n                            </Paper>\n                        </Grid>\n                        <Grid item xs={3}>\n                            <Paper className={classes.paper}>\n                                <Typography variant=\"caption\" display=\"inline\" gutterBottom>    Total Duration:    </Typography>\n                                <Typography variant=\"subtitle2\" display=\"block\" align=\"center\" gutterBottom >{formatTime(derivedField.totalDuration)}</Typography>\n                            </Paper>\n                        </Grid>\n                    </Grid>\n                )\n                : \"\"}\n            <div id=\"chart-container\" className=\"GoogleChart\">\n                {\n                    formattedData.length > 1 ?\n                        <GoogleChart\n                            width={'840px'}\n                            height={'400px'}\n                            chartType=\"Timeline\"\n                            data={formattedData}\n                            options={{\n                                timeline: {\n                                    colorByRowLabel: true,\n                                    margin: 'auto',\n                                    showBarLabels: false,\n                                },\n                                colors: ['transparent', '#469FAE', '#3ECDB6', '#C09BD8', '#F67E5C', '#CA1252', '#DD5B5C', '#D9959A', '#938D99', '#5E614A'],\n                            }}\n                            rootProps={{ 'data-testid': '6' }}\n                        />\n                        : \"\"\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default Chart;","import React, { useState, useEffect, useRef } from \"react\";\nimport \"./App.css\";\nimport 'fontsource-roboto';\nimport { withStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Chart from \"./components/Chart\"\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport ReactPlayer from \"react-player\";\nimport useEventListener from \"@use-it/event-listener\";\nimport KeybindMap from \"./hooks/keybindMap\"\nimport ImageIcon from '@material-ui/icons/Image';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport MovieIcon from '@material-ui/icons/Movie';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst SPACE_KEYS = ['32', ' '];\n\nconst useStyles = makeStyles((theme) => ({\n    content: {\n        marginTop: '55px'\n    },\n    reactPlayer: {\n        margin: 'auto'\n    },\n    popoverMenu: {\n        width: '200px'\n    },\n    slider: {\n        margin: '0px 20px',\n        width: '80%'\n    },\n    button: {\n        padding: 0,\n    },\n    smallButton: {\n        marginTop: -4,\n        padding: 4,\n        '& svg': {\n            fontSize: 18\n        }\n    },\n    largeButton: {\n        display: 'block',\n        margin: 'auto',\n        '& svg': {\n            fontSize: 144,\n            color: \"#469FAE\"\n        }\n    },\n    toolbar: {\n        minHeight: 48,\n        maxHeight: 48,\n    },\n    title: {\n        flexGrow: 1,\n    },\n    bottomAppBar: {\n        top: 'auto',\n        bottom: 0,\n    },\n    bottomToolbar: {\n        margin: 'auto',\n        minWidth: '700px',\n        textAlign: 'center',\n        minHeight: 32,\n        maxHeight: 32,\n    },\n    menu: {\n        width: 'fit-content',\n        border: `1px solid ${theme.palette.divider}`,\n        borderRadius: theme.shape.borderRadius,\n        '& svg': {\n            margin: theme.spacing(1.5),\n        },\n        '& hr': {\n            margin: theme.spacing(0, 0.5),\n        },\n    },\n}));\n\nconst StyledMenu = withStyles({\n    paper: {\n        border: '1px solid #d3d4d5',\n        width: '200px',\n        margin: '0px 10px',\n    }\n})((props) => (\n    <Menu\n        elevation={0}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n        }}\n        transformOrigin={{\n            vertical: 'top',\n            horizontal: 'right',\n        }}\n        {...props}\n    />\n));\n\nconst StyledMenuItem = withStyles((theme) => ({\n    root: {\n        '&:focus': {\n            backgroundColor: theme.palette.primary.main,\n            '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n                color: theme.palette.common.white,\n            },\n        },\n    },\n}))(MenuItem);\n\nconst App = () => {\n    var isPlayingBuffer = false;\n    const [state, setState] = useState({\n        videoFilePath: '',\n        isPlaying: false,\n        duration: 0,\n        playedSeconds: 0,\n        loadedSeconds: 0,\n        playbackRate: 1,\n        keybinds: KeybindMap.Keybinds,\n        data: {\n            metadata: {},\n            events: []\n        }, // persisted data records\n        activeRecords: [], // activity record between keypress down and keypress up\n        derivedFields: []\n    });\n\n    const confirmVideoReset = () => {\n        return window.confirm(\"Are you sure you wish to reset the existing video? Unsaved data will be lost.\");\n    };\n\n    const resetData = () => {\n        hiddenInput.current.value = \"\";\n        setState({ ...state, videoFilePath: '', videoFileName: '', data: { metadata: {}, events: [] } });\n    };\n\n    function resetVideo() {\n        if (confirmVideoReset()) {\n            resetData();\n        }\n    };\n\n    const handleDuration = (duration) => {\n        setState({ ...state, duration: duration });\n    };\n\n    const handleProgress = (progress) => {\n        setState({ ...state, playedSeconds: progress.playedSeconds, loadedSeconds: progress.loadedSeconds });\n    };\n\n    const handleVideoSelect = (event) => {\n        if (state.videoFilePath !== '') {\n            if (!confirmVideoReset()) {\n                return;\n            }\n        }\n        resetData();\n        hiddenInput.current.click();\n    };\n\n    const handleVideoUpload = (event) => {\n        var uploadedFile = event.target.files[0];\n        if (uploadedFile) {\n            var video = document.createElement('video');\n            var videoFilePath = URL.createObjectURL(uploadedFile);\n            video.src = videoFilePath;\n            video.addEventListener('loadedmetadata', function () {\n                var duration = parseFloat(video.duration.toFixed(2));\n                setState({\n                    ...state,\n                    videoFilePath: videoFilePath,\n                    videoFileName: event.target.files[0].name,\n                    data: {\n                        metadata: {\n                            fileName: event.target.files[0].name,\n                            scoringDate: Date.now(),\n                            scoringDateText: new Date().toISOString(),\n                            duration: duration\n                        },\n                        events: []\n                    }\n                });\n                document.activeElement.blur();\n            });\n        }\n    };\n\n    const handleDownloadData = () => {\n        if (state.data.events && state.data.events.length > 0) {\n            var dataStr = \"data:text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(state.data));\n            var downloadAnchorNode = document.createElement('a');\n            downloadAnchorNode.setAttribute(\"href\", dataStr);\n            downloadAnchorNode.setAttribute(\"download\", state.videoFileName + \"-scored-behavior.json\");\n            document.body.appendChild(downloadAnchorNode); // required for firefox\n            downloadAnchorNode.click();\n            downloadAnchorNode.remove();\n        }\n    };\n\n    const handleDownloadSVG = () => {\n        var chartContainer = document.getElementById('chart-container');\n        var svgData = chartContainer.getElementsByTagName('svg')[0].outerHTML;\n        svgData = svgData.replace(\"<svg\", \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\");\n\n        var svgBlob = new Blob([svgData], { type: \"image/svg+xml;charset=utf-8\" });\n        var svgUrl = URL.createObjectURL(svgBlob);\n        var downloadLink = document.createElement(\"a\");\n        downloadLink.href = svgUrl;\n        downloadLink.download = state.videoFileName + \"-scored-behavior.svg\";\n        document.body.appendChild(downloadLink);\n        downloadLink.click();\n        document.body.removeChild(downloadLink);\n    };\n\n    const handleNavigateToGitHub = () => {\n        window.open('https://github.com/zacran/video-keypress', '_blank');\n    };\n\n    const handleIsPlayingUpdate = () => {\n        isPlayingBuffer = !isPlayingBuffer;\n    };\n\n    const handleOnStartPlay = () => {\n        setState({ ...state, isPlaying: true });\n    };\n\n    const handleOnPauseStop = () => {\n        setState({ ...state, isPlaying: false });\n    };\n\n    const handleKeydown = (event) => {\n        if (state.videoFilePath !== '' && SPACE_KEYS.includes(String(event.key))) {\n            console.log(\"space \" + event.key, state);\n            event.preventDefault();\n            handleIsPlayingUpdate();\n        } else if (state.isPlaying) {\n            handleKeyevent(event.key, recordKeydown);\n        }\n    };\n\n    const handleKeyup = ({ key }) => {\n        handleKeyevent(key, recordKeyup);\n    };\n\n    const handleKeyevent = (key, callback) => {\n        console.log(\"press \" + key, state);\n        state.keybinds.forEach(function (keybind) {\n            if ((keybind.key === (String(key)) || keybind.code === (String(key)))) {\n                callback(keybind);\n            }\n        });\n    };\n\n    const getPlaybackRate = (value) => {\n        return `${value}x`;\n    };\n\n    const handlePlaybackRateChange = (event, value) => {\n        if (value !== state.playbackRate)\n            setState({ ...state, playbackRate: parseFloat(value) })\n    };\n\n    const recordKeydown = (keybind) => {\n        if (!keybind.active) {\n            keybind.active = true;\n            console.log(\"key down: \" + keybind.key + \" at \" + state.playedSeconds + \" secs\");\n\n            let activity = {\n                key: keybind.key,\n                behavior: keybind.behavior,\n                start: state.playedSeconds\n            };\n\n            let activeRecords = state.activeRecords;\n            activeRecords.push(activity);\n            setState({ ...state, activeRecords: activeRecords });\n            console.log(\"recorded activity start: \", activity);\n            console.log(state.activeRecords);\n        }\n    };\n\n    const recordKeyup = (keybind) => {\n        let activity = state.activeRecords.find(obj => { return obj.key === keybind.key });\n        let activeRecords = state.activeRecords.filter(obj => obj.key !== keybind.key);\n\n        if (activity) {\n            keybind.active = false;\n            console.log(\"key up: \" + keybind.key + \" at \" + state.playedSeconds + \" secs\");\n\n            activity.id = state.data.events.length;\n            activity.end = state.playedSeconds;\n\n            console.log(\"recorded activity end: \", activity);\n            console.log(state.activeRecords);\n\n            let dataEvents = state.data.events;\n            dataEvents.push(activity);\n\n            setState({\n                ...state,\n                activeRecords: activeRecords,\n                data: {\n                    events: dataEvents,\n                    metadata: {\n                        ...state.data.metadata\n                    }\n                }\n            });\n            console.log(state.data);\n        }\n    };\n\n    useEventListener('keydown', handleKeydown);\n    useEventListener('keyup', handleKeyup);\n\n    const classes = useStyles();\n    const hiddenInput = useRef(null);\n\n    const [anchorKeybinds, setAnchorKeybinds] = useState(null);\n    const [anchorSettings, setAnchorSettings] = useState(null);\n\n    const handleKeybindMenuClick = (event) => {\n        setAnchorKeybinds(event.currentTarget);\n    };\n\n    const handleKeybindMenuClose = () => {\n        setAnchorKeybinds(null);\n    };\n\n    const handleSettingsClick = (event) => {\n        setAnchorSettings(event.currentTarget);\n    };\n\n    const handleSettingsClose = () => {\n        setAnchorSettings(null);\n    };\n\n\n    return (\n        <div className=\"App\">\n            <input type=\"file\" ref={hiddenInput} onChange={handleVideoUpload} style={{ display: 'none' }} />\n            <StyledMenu\n                className={classes.popoverMenu}\n                anchorEl={anchorSettings}\n                keepMounted\n                open={Boolean(anchorSettings)}\n                onClose={handleSettingsClose}>\n\n                <ListItemText id=\"playbackRate-slider\" primary=\"Playback Speed\" align=\"center\" />\n                <Slider\n                    key={`playbackRate-slider`}\n                    className={classes.slider}\n                    value={state.playbackRate || 1}\n                    getAriaValueText={getPlaybackRate}\n                    aria-labelledby=\"playbackRate-slider\"\n                    step={0.25}\n                    marks\n                    min={0.25}\n                    max={2}\n                    valueLabelDisplay=\"auto\"\n                    onChange={handlePlaybackRateChange}\n                />\n\n            </StyledMenu>\n            <StyledMenu\n                className={classes.popoverMenu}\n                anchorEl={anchorKeybinds}\n                keepMounted\n                open={Boolean(anchorKeybinds)}\n                onClose={handleKeybindMenuClose}>\n                <StyledMenuItem>\n                    {state.isPlaying === false && state.playedSeconds === 0 && (\n                        <ListItemText primary=\"Start\" secondary=\"space\" align=\"center\" />\n                    )}\n                    {state.isPlaying === true && (\n                        <ListItemText primary=\"Pause\" secondary=\"space\" align=\"center\" />\n                    )}\n                    {state.isPlaying === false && state.playedSeconds > 0 && (\n                        <ListItemText primary=\"Resume\" secondary=\"space\" align=\"center\" />\n                    )}\n                </StyledMenuItem>\n                {state.keybinds.map((keybind) =>\n                    <StyledMenuItem key={keybind.key}>\n                        <ListItemText primary={keybind.behavior} secondary={keybind.key} align=\"center\" />\n                    </StyledMenuItem>\n                )}\n                {/* <StyledMenuItem>\n                    <ListItemIcon>\n                        <AddCircleIcon fontSize=\"small\" />\n                    </ListItemIcon>\n                    <ListItemText secondary=\"Add Keybind\" align=\"center\" />\n                </StyledMenuItem> */}\n            </StyledMenu>\n            <AppBar position=\"fixed\" style={{ background: '#469FAE' }}>\n                <Toolbar className={classes.toolbar}>\n                    <Typography variant=\"h5\" component=\"h1\" className={classes.title}>Video Keypress</Typography>\n                    <Grid container alignItems=\"center\" className={classes.menu}>\n                        <Tooltip title=\"Select Video\">\n                            <IconButton aria-label=\"select video\" color=\"inherit\" className={classes.button} onClick={(e) => handleVideoSelect(e)}>\n                                <MovieIcon />\n                            </IconButton>\n                        </Tooltip>\n                        <Divider orientation=\"vertical\" flexItem />\n                        <Tooltip title=\"Download Data\">\n                            <IconButton aria-label=\"download data\"\n                                color=\"inherit\"\n                                className={classes.button}\n                                onClick={handleDownloadData}>\n                                <GetAppIcon />\n                            </IconButton>\n                        </Tooltip>\n                        <Divider orientation=\"vertical\" flexItem />\n                        <Tooltip title=\"Download SVG\">\n                            <IconButton aria-label=\"download svg\"\n                                color=\"inherit\"\n                                className={classes.button}\n                                onClick={handleDownloadSVG}>\n                                <ImageIcon />\n                            </IconButton>\n                        </Tooltip>\n                        <Divider orientation=\"vertical\" flexItem />\n                        <Tooltip title=\"Keybinds\">\n                            <IconButton aria-label=\"keybinds\"\n                                color=\"inherit\"\n                                aria-haspopup=\"true\"\n                                onClick={handleKeybindMenuClick}\n                                className={classes.button}>\n                                <KeyboardIcon />\n                            </IconButton>\n                        </Tooltip>\n                        {/* <Divider orientation=\"vertical\" flexItem />\n                        <Tooltip title=\"Data\">\n                            <IconButton aria-label=\"data\" color=\"inherit\" className={classes.button}>\n                                <FolderIcon />\n                            </IconButton>\n                        </Tooltip> */}\n                        <Divider orientation=\"vertical\" flexItem />\n                        <Tooltip title=\"Settings\">\n                            <IconButton aria-label=\"settings\"\n                                color=\"inherit\"\n                                aria-haspopup=\"true\"\n                                onClick={handleSettingsClick}\n                                className={classes.button}>\n                                <SettingsIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </Grid>\n                </Toolbar>\n            </AppBar>\n            <div className={classes.content}>\n                {state.videoFilePath ?\n                    <Typography variant=\"button\" display=\"block\" align=\"center\" gutterBottom>\n                        Current Video: {state.videoFileName}\n                        <Tooltip title=\"Unset Video\">\n                            <IconButton aria-label=\"unset video\" color=\"inherit\" className={classes.smallButton} onClick={resetVideo}>\n                                <CancelIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </Typography>\n                    : \"\"}\n                {!state.videoFilePath ?\n                    <div>\n                        <Typography variant=\"button\" display=\"block\" align=\"center\" gutterBottom>\n                            No video selected\n                    </Typography>\n                        <Tooltip title=\"Select Video\">\n                            <IconButton aria-label=\"select video\" color=\"inherit\" className={classes.largeButton} onClick={(e) => handleVideoSelect(e)}>\n                                <MovieIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </div>\n                    : \"\"}\n                <div className=\"Row\">\n                    <div className=\"VideoPlay\">\n                        <ReactPlayer url={state.videoFilePath}\n                            className={classes.reactPlayer}\n                            playing={isPlayingBuffer}\n                            width=\"840px\"\n                            height=\"100%\"\n                            controls={true}\n                            onDuration={handleDuration}\n                            onProgress={handleProgress}\n                            playbackRate={state.playbackRate || 1}\n                            onPause={handleOnPauseStop}\n                            onStart={handleOnStartPlay}\n                            onPlay={handleOnStartPlay}\n                        />\n                        <div className=\"Row\">\n                            <Chart state={state} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <AppBar position=\"fixed\" color=\"transparent\" className={classes.bottomAppBar}>\n                <Toolbar className={classes.bottomToolbar}>\n                    <Grid container alignItems=\"center\" spacing={2}>\n                        <Grid item xs={6}>\n                            <Typography variant=\"caption\" align=\"center\" gutterBottom>\n                                No data is transfered. All data remains in your browser.\n                            </Typography>\n                        </Grid>\n                        <Grid item xs={1}>\n                            <Tooltip title=\"Visit GitHub Repo\">\n                                <IconButton aria-label=\"visit github repo\"\n                                    color=\"inherit\"\n                                    className={classes.button}\n                                    onClick={handleNavigateToGitHub}>\n                                    <GitHubIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Grid>\n                        <Grid item xs={3}>\n                            <Typography variant=\"caption\" align=\"center\" gutterBottom>\n                                GNU General Public License\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                </Toolbar>\n            </AppBar>\n        </div >\n    );\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}